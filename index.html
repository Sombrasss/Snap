<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üé¨ FileMoon Organizado por Temporada</title>
  <style>
    body {
      background:#0a0a0a;
      color:#fff;
      font-family: Poppins, sans-serif;
      padding:20px;
      text-align:center;
    }
    input, textarea {
      width:90%;
      padding:10px;
      border-radius:8px;
      border:none;
      margin:10px 0;
      background:#1a1a1a;
      color:#fff;
    }
    button {
      background:#ff4747;
      color:#fff;
      border:none;
      padding:10px 18px;
      border-radius:8px;
      margin:5px;
      cursor:pointer;
      transition:0.3s;
    }
    button:hover { background:#ff6a00; }
    .temporada {
      margin-top:25px;
      background:#111;
      border-radius:10px;
      padding:10px;
      box-shadow:0 0 10px #000;
    }
    .titulo-temp {
      font-weight:bold;
      font-size:20px;
      margin-bottom:10px;
      color:#ffae00;
    }
    iframe {
      width:100%;
      height:70vh;
      border:none;
      border-radius:10px;
      margin-top:15px;
      background:#000;
    }
  </style>
</head>
<body>
  <h1>üé¨ Organizador FileMoon</h1>
  <p>Cole aqui os links (um por linha):</p>
  <textarea id="links" rows="8" placeholder="https://filemoon.to/d/dp9v34i4rnnz/1x1.mp4&#10;https://filemoon.to/d/abc123/1x2.mp4&#10;https://filemoon.to/d/xyz321/2x1.mp4"></textarea>
  <br>
  <button onclick="gerar()">Gerar Bot√µes</button>

  <div id="saida"></div>
  <iframe id="player"></iframe>

<script>
  // Fun√ß√£o que transforma e organiza
  function gerar() {
    const texto = document.getElementById("links").value.trim();
    if (!texto) return alert("Cole pelo menos um link FileMoon.");

    const linhas = texto.split(/\n+/);
    const episodios = {};

    linhas.forEach(link => {
      link = link.trim();
      if (!link) return;

      // transforma: /d/.../.mp4 ‚Üí /e/.../
      let novo = link.replace('/d/', '/e/').replace(/\.mp4.*$/i, '');
      
      // extrai nome (ex: 1x1, 2x3, etc)
      const match = novo.match(/(\d+)x(\d+)/i);
      if (match) {
        const temp = match[1];
        const ep = match[2];
        if (!episodios[temp]) episodios[temp] = [];
        episodios[temp].push({ episodio: ep, url: novo });
      } else {
        // Se n√£o tiver padr√£o 1x1, p√µe numa categoria "Outros"
        if (!episodios['Outros']) episodios['Outros'] = [];
        episodios['Outros'].push({ episodio: link, url: novo });
      }
    });

    // Gera o HTML organizado por temporada
    let html = '';
    for (const temp in episodios) {
      html += `<div class="temporada"><div class="titulo-temp">üì∫ Temporada ${temp}</div>`;
      // ordena epis√≥dios numericamente
      episodios[temp].sort((a,b)=>a.episodio - b.episodio);
      episodios[temp].forEach(ep => {
        html += `<button onclick="abrir('${ep.url}')">‚ñ∂Ô∏è Play ${temp}x${ep.episodio}</button>`;
      });
      html += `</div>`;
    }

    document.getElementById("saida").innerHTML = html;
  }

  // Abre o v√≠deo no iframe
  function abrir(url) {
    document.getElementById("player").src = url;
    window.scrollTo({ top: document.getElementById("player").offsetTop, behavior: 'smooth' });
  }
</script>
</body>
</html>
